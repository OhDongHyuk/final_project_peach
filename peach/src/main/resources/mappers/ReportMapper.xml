<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.ph.peach.dao.ReportDAO">
	<resultMap type="kr.ph.peach.vo.ReportVO" id="ReportVO">
		<id property="rp_num" column="rp_num" />
		<result property="rp_date" column="rp_date" />
		<result property="rp_info" column="rp_info" />
		<result property="rp_me_num" column="rp_me_num" />
		<result property="rp_table" column="rp_table" />
		<result property="rp_key" column="rp_key" />
		<collection property="memberVO"
			ofType="kr.ph.peach.vo.MemberVO" column="rp_me_num"
			select="selectMemberList" />

	</resultMap>

	<insert id="insertReport">
		insert into report(rp_date, rp_info, rp_me_num,
		rp_table, rp_key) values(#{reportVo.rp_date}, #{reportVo.rp_info},
		#{reportVo.rp_me_num}, #{reportVo.rp_table}, #{reportVo.rp_key})
	</insert>
	<select id="getreportList" resultMap="ReportVO">
		select * from report
	</select>
	<select id="selectMemberList"
		resultType="kr.ph.peach.vo.MemberVO">
		select * from member where me_num = #{rp_me_num}
		
	</select>
</mapper>
